Overslaan en naar inhoud
Chatgeschiedenis





Teamleden uitnodigen
Je zei:
wetransfer_ns-tvv-tender-gebo-tours-betuwe-express_2026-01-21_1550.zip
Zip-archief
Addendum 5 2026 getekend incl. tarieven...Hellingman.pdf
PDF
NS EA Trein Vervangend Vervoer .docx
Document
Tarieven 2026 Arriva.docx
Document
5. Tariefkaart Vervoerders 2026.pdf
PDF
Tarieven Transvision 2026.pdf
PDF
Wat zie je in de leidraad over busomlopen?

Ik denk dat er iets van een model moet komen daarvoor.

ChatGPT zei:

Nagedacht gedurende 9m 10s
In de (door jou gedeelde) leidraad-samenvatting zie ik dat busomlopen expliciet onderdeel zijn van het kwaliteitscriterium â€œEfficiÃ«nte businzetâ€ (K3). NS zegt daarbij dat de casus het fundament voor de contractuitvoering vormt en dat ze een leverancier zoeken die aantoonbaar het beste kan bijdragen aan â€œde meest efficiÃ«nte, robuuste en realistische busomlopenâ€ voor toekomstige buitendienststellingen. 
NS EA Trein Vervangend Vervoer


Daarbij knipt NS dit op in 4 onderdelen die je uitwerking moet raken:
A) Busomloop en chauffeursdiensten
B) Zero Emissie touringcars en laadstrategie
C) Verkeersplan rondom buslocaties en begeleidend operationeel personeel
D) Tools en processen 
NS EA Trein Vervangend Vervoer


Wat er (nog concreter) in de echte Gunningsleidraad + bijlage staat
In de tender-export zip zit ook de volledige Gunningsleidraad en een aparte Bijlage â€œEisen Busomlopenâ€. Die geven precies aan wat een busomloop is en hoe je ze moet aanleveren (o.a. NeTEx/VehicleSchedule, â€œNIET TOEGEWEZENâ€, start garage-uitrit/eind garage-inrit, levering x-6 en update x-3, etc.).

Gunningsleidraad RFP TVV (pdf)

Bijlage 05 â€“ Eisen Busomlopen (pdf)

Jaâ€”dit â€œschreeuwtâ€ om een model
Als je dit netjes wilt doen (Ã©n herhaalbaar voor casussen/operatie), heb je in de kern een Vehicle Scheduling + Driver Duty model nodig, plus ZE/charging constraints:

1) Busomloop-model (voertuigplanning)

Input: busspecificatie (ritten met start/eindtijd, van/naar halte), garages, rij-/omrijtijden, bustypes/availability, minimale keertijden, (optioneel) charging/tanken/pauses.

Beslissing: welke ritten aan elkaar â€œchainenâ€ tot Ã©Ã©n omloop + waar je garage-uit/garage-in, pauze, laden/tanken invoegt.

Doel (typisch): minimaliseer #bussen, dode km (deadhead), totale busuren, en straf â€œniet toegewezenâ€ ritten (als 100% dekking niet kan).

Constraints (rechtstreeks uit de eisen/definitie): chronologische blokken, geen overlap per bus, start met garage-uitrit en eindig met garage-inrit, unieke IDs, en expliciet â€œNIET TOEGEWEZENâ€ als dekking niet lukt.

2) Chauffeursdiensten-model (duty scheduling)

Bovenop de omlopen maak je diensten met regels voor rijtijd/werktijd/pauzes.

In de casus-vereisten staat bovendien een vaste aanrijdtijd-aanname van 60 min (dus dat moet als constraint/offset in je duty-bouw).

3) ZE + laadstrategie

Extra constraints: minimum aantal ZE-bussen in omlopen, energieverbruik per omloop, laadmomenten/locaties, laadsnelheid/capaciteit en de â€œcontinuÃ¯teitâ€ van de dienstregeling.

Output / â€œdeliverable fitâ€

Exporteer omlopen als:

Excel-schema (voor casus/communicatie)

NeTEx VehicleSchedule + VehicleAssignment (voor digitale levering richting NS, zoals de bijlage beschrijft)

Als je wil, kan ik op basis van die twee pdfâ€™s ook meteen een concreet datamodel uitschrijven (tabellen/velden) en een kostenfunctie die aansluit op de tariefstructuur (uur + km + toeslagen), zodat het model niet alleen â€œfeasibleâ€ maar ook financieel optimaal is.


Bronnen
Je zei:
Ik zie dat verwezen wordt naar bijlage I (pdf) en bijlage J (excel). 

Ik denk dat ik mij specifiek moet richten op:

Beschrijf in een plan van aanpak hoe u invulling geeft en doelstelling aan de hand van de casus die is bijgevoegd als Bijlage I â€“ Casus subGunningscriterium K3. In deze casus wordt een simulatie van een scenario van een buitendienststelling weergegeven. In Bijlage J â€“ casus busdiensten vindt u de specifieke informatie voor de busdiensten middels Excel tabbladen
U dient in uw plan van aanpak minimaal terug te komen op de volgende aspecten:
A.
Busomloop en chauffeursdiensten
o
Een uitgewerkt schema (in Excel) met de omlopen van bussen o.b.v. de door NS aangeleverde specificatie. Inclusief een tekstuele onderbouwing op robuust, efficiÃ«nt en realistisch.
o
De bij de omlopen benodigde chauffeursdiensten, aantal bussen (per type) en het aantal uren per Buitendienstelling/traject.
o
U dient er voor de chauffeursdiensten vanuit te gaan dat alle bussen een aanrijdtijd van 60 minuten hebben vanaf de vertreklocatie van de bus naar de startlocatie van de Busdienst (Busomloop).
o
De wijze waarop u de tijdelijke busroutes (bijvoorbeeld omleidingen, aangepaste halteplaatsen) aanlevert aan en afstemt met relevante partijen zoals verkeersmanagement, gemeenten, vervoersautoriteiten en NS. Geef per traject uit de casus ook de geadviseerde busroute (via Google Maps).
o
Specifiek voor Stopbus traject Driebergen-Zeist â€“ Rhenen; De wijze waarop de chauffeurs geÃ¯nstrueerd worden over de buitendienststelling en busomlopen.
o
Welke mogelijkheden u ziet om bussen tijdelijk te bufferen of te pauzeren in de nabijheid van locaties waar treinvervangend vervoer plaatsvindt. En welke suggesties u doet voor geschikte parkeer- of wachtruimtes, waar bussen zonder hinder kunnen wachten.
ChatGPT zei:

Nagedacht gedurende 6m 15s
Ja â€” dat is precies waar K3 op beoordeeld wordt: NS gebruikt de casus als fundament en zoekt â€œde meest efficiÃ«nte, robuuste en realistische busomlopenâ€ 
NS EA Trein Vervangend Vervoer

. In K3 willen ze dat je plan van aanpak (minimaal) ingaat op A t/m D (waarbij A het meeste â€œrekenwerkâ€ bevat) 
NS EA Trein Vervangend Vervoer

.

Bijlage I & J: waar ze voor bedoeld zijn (praktisch)
Ik heb ze uit de tender-zip gehaald:

Bijlage I â€“ Casus K3 (PDF): openen

Bijlage J â€“ casus busdiensten (Excel):
Bijlage_J_casus_busdiensten_14484082.xlsx



Voorblad
SN Ut-Ed DD - do - 11-06-2026
SN Ut-Ed TC - do - 11-06-2026
ST Db-Ed - do - 11-06-2026
ST Db-Rhn - do - 11-06-2026
SN Ut-Ed DD - vr - 12-06-2026
SN Ut-Ed TC - vr - 12-06-2026
ST Db-Ed - vr - 12-06-2026
ST Db-Rhn - vr - 12-06-2026
Db-Rhn zazo - za - 13-06-2026
Nachtnet vrza - za - 13-06-2026
SN Ut-Ed DD - za - 13-06-2026
SN Ut-Ed TC - za - 13-06-2026
ST Db-Ed - za - 13-06-2026
ST Db-Rhn - za - 13-06-2026
Taxi Db-Mrn - za - 13-06-2026
Db-Rhn zazo - zo - 14-06-2026
Nachtnet zazo - zo - 14-06-2026
SN Ut-Ed TC - zo - 14-06-2026
ST Db-Ed - zo - 14-06-2026
ST Db-Rhn - zo - 14-06-2026
Taxi Db-Mrn - zo - 14-06-2026
Ut-Amf - zo - 14-06-2026
Ut-Bkl - zo - 14-06-2026
Ut-Htn - zo - 14-06-2026
Ut-Hvs - zo - 14-06-2026
Ut-Wd - zo - 14-06-2026
SN Ut-Ed TC - ma - 15-06-2026
ST Db-Ed - ma - 15-06-2026
ST Db-Rhn - ma - 15-06-2026
Taxi Db-Mrn - ma - 15-06-2026

Werkwijze: Bijlage I geeft de context/â€œspelregelsâ€ van het scenario, Bijlage J is de input met alle dienstregelingsdetails per dag/traject/bustype. Jouw output is dan jouw omloopplan + chauffeursdiensten + onderbouwing.

Waar je je bij A op moet richten (zodat je â€œraakâ€ schrijft)
Hier is een compacte checklist die precies aansluit op wat jij opsomt:

1) Omloopschema in Excel (de kerndeliverable)
Maak Ã©Ã©n output-Excel (los van Bijlage J) met minimaal:

Trip-list (genormaliseerd): alle ritten uit Bijlage J in 1 tabel (rit-id, traject, richting, start/eindlocatie, start/eindtijd, bustype, dag).

Voertuig-omlopen (vehicle blocks): per bus een chronologische keten van ritten + dode ritten + pauze/buffer + begin/einde (garage of startlocatie).

Samenvatting: # bussen per type, # reservebussen (uit Bijlage J), voertuiguren per traject/per dag, + belangrijkste KPIâ€™s.

Onderbouwing â€œrobuust/efficiÃ«nt/realistischâ€ maak je geloofwaardig met 5â€“8 meetpunten, bv:

minimale keertijden + extra buffer op knooppunten

scheiding van risicovolle piek- en basisomlopen

inzet reservebussen als â€œlosâ€ inzetbaar (niet vastgeketend in kwetsbare omlopen)

beperking dode km/lege tijd vs. behoud van punctualiteit

2) Chauffeursdiensten (incl. 60 min aanrijdtijd)
Laat zien hoe je van omlopen naar diensten gaat:

dienst start = aanrijdtijd 60 min vÃ³Ã³r eerste ritstart (zoals geÃ«ist)

pauzes/aflossing: expliciet modelleren (ook al zijn exacte CAO-regels niet uitgevraagd, laat zien dÃ¡t je ze toepast)

output: # diensten, diensturen, en koppeling dienst â†” omloop

3) Tijdelijke routes + afstemming + Google Maps adviesroute
Schrijf dit als een proces (NS wil zien dat je dit beheerst):

routebepaling (standaardroute + alternatieven + beperkingen zoals wegwerkzaamheden/hoogte/gewicht)

afstemming met verkeersmanagement/gemeenten/vervoersautoriteiten/NS (wie doet wat, wanneer)

oplevering: per traject 1 geadviseerde route (Google Maps) + fallback route + halte-/opstelimpact

4) Specifiek Driebergen-Zeist â€“ Rhenen: chauffeursinstructie
Dit is jouw kans om operationele volwassenheid te tonen. Zet er concreet in:

â€œtoolbox briefingâ€ (voor aanvang) + digitale omloopkaart per chauffeur

routekaart met halteplaatscodes/instaplocaties + waar te keren + waar te wachten

escalatie: wat te doen bij vertraging/omleiding/volle bus + contactpunten

5) Bufferen/pauzeren nabij TVV-locaties
Lever niet alleen ideeÃ«n, maar een selectie-aanpak:

criteria (ruimte, geen hinder, sanitair, draai-/keerruimte, veiligheid, toestemming)

per kernlocatie 1â€“3 voorkeursplekken + waarom (en hoe je dit verifieert via schouw/afstemming)

Belangrijk: vergeet Bâ€“Câ€“D niet
Je kunt je inhoudelijk â€œzwaarâ€ focussen op A (terecht), maar zorg dat je plan van aanpak ook kopjes heeft voor:

B (ZE + laadstrategie),

C (verkeersplan + personeel rond locaties),

D (tools/processen),
want NS benoemt deze expliciet als onderdelen van K3 
NS EA Trein Vervangend Vervoer

.

Als je wil, kan ik ook een concreet Excel-outputformat (kolommen + tabstructuur) uitschrijven dat exact handig is om omloop â†’ diensten â†’ tellingen per traject te kunnen onderbouwen.


Bronnen
Je zei:
Kan jij het kwantitatieve deel voor mij doen?
ChatGPT zei:

Nagedacht gedurende 26m 20s
Ja â€” ik heb het kwantitatieve deel voor je uitgewerkt op basis van Bijlage J (Excel) en ingericht zoals het subgunningscriterium K3 vraagt (busomlopen + chauffeursdiensten + aantallen/uren). Dit sluit aan op de K3-opzet waarin NS expliciet de efficiÃ«nte, robuuste en realistische busomlopen en de uitwerking van busomloop en chauffeursdiensten beoordeelt. îˆ€fileciteîˆ‚turn8file3îˆ‚L37-L46îˆ

âœ… Output (Excel)
Ik heb een Excelbestand gemaakt met:

Trips: alle busritten uit Bijlage J genormaliseerd (incl. datum, richting, vertrek/arriveer, bustype).

Assignments: de ritten zijn gekoppeld tot busomlopen (per voertuig een volgorde van ritten).

Vehicles: per omloop een overzicht (eerste rit, laatste rit, span, rij-uren, idle).

Chauffeursdiensten: per omloop een chauffeursdienst incl. +60 min aanrijdtijd vooraf en +60 min na afloop (zoals jij al benoemde in de eis).

Samenvatting: aantallen voertuigen per dag/traject/type + totale voertuiguren + totale chauffeursuren.

Reservebussen: overgenomen uit het â€œVoorbladâ€ van Bijlage J (station, aantallen, tijdvakken).

ğŸ“„ Bestand: K3_Kwantitatief_Busomlopen_en_Chauffeursdiensten.xlsx
(ik heb dit zo opgezet dat de belangrijkste totalen en uren via Excel-formules berekend worden)

Belangrijkste aannames (instelbaar in tab â€œParametersâ€)
Minimale keertijd / wisseltijd op eindpunt: 10 minuten (robust maar nog efficiÃ«nt).

Chauffeursaanrijdtijd: 60 minuten vÃ³Ã³r start Ã©n 60 minuten na einde dienst.

Als een richting niet expliciet in het Excel-input stond, heb ik omlopen tÃ³ch koppelbaar gemaakt door â€œdeadhead/repositionâ€ te schatten als:

median reistijd van dezelfde verbinding binnen dezelfde dienst (of spiegelrichting).

Snelle managementsamenvatting (aantal bussen per dag/traject/type)
Hier alvast de kern (uit tab â€œSamenvattingâ€):

Donderdag 11-06-2026
SN Ut-Ed DD (Dubbeldekker): 18 voertuigen

SN Ut-Ed TC (Touringcar): 10 voertuigen

ST Db-Ed (Touringcar): 9 voertuigen

ST Db-Rhn (Touringcar): 9 voertuigen

Vrijdag 12-06-2026
SN Ut-Ed DD (Dubbeldekker): 9

SN Ut-Ed TC (Touringcar): 12

ST Db-Ed (Touringcar): 12

ST Db-Rhn (Touringcar): 9

Zaterdag 13-06-2026
SN Ut-Ed TC (Touringcar): 28

ST Db-Ed (Touringcar): 12

Db-Rhn zazo (Touringcar): 7

Taxi Db-Mrn (Taxibus): 4

(+ Nachtnet vrza: 6 touringcars)

Zondag 14-06-2026 (selectie)
SN Ut-Ed TC: 8

ST Db-Ed: 12

ST Db-Rhn: 9

Taxi Db-Mrn: 4

plus kleine stopbus-shuttles (Ut-Hvs, Ut-Wd, etc.)

Maandag 15-06-2026 (selectie)
SN Ut-Ed TC: 4

ST Db-Ed: 2

ST Db-Rhn: 3

Taxi Db-Mrn: 2

Wat is nog nÃ­et gedaan (bewust)
Jij vroeg specifiek om het kwantitatieve deel. Dus ik heb nog niet uitgewerkt:

Google Maps routes per traject

tekstuele robuustheids/efficiÃ«ntie-onderbouwing

instructieproces chauffeurs (vooral Db-Zeistâ€“Rhenen)

buffervoorstellen/parkeren nabij stations (kwalitatief)

Als je wilt kan ik wÃ©l helpen met:

een korte tekstuele onderbouwing per traject (robust/efficiÃ«nt/realistisch) op basis van de omlopen, en/of

een template-tekst voor het plan van aanpak die verwijst naar de tabbladen.

Volgende vraag (klein maar belangrijk)
Wil je dat ik de omlopen per traject afzonderlijk houd (zoals nu), of moeten we proberen voertuigen tussen trajecten te hergebruiken (meer efficiency, maar dan moeten we aannames maken over rijtijd tussen stations/locaties)?

Zeg maar wat je voorkeur is, dan pas ik het model daarop aan.


Bronnen
Je zei:
Ik zie de excel niet
ChatGPT zei:

Nagedacht gedurende 22m 12s
Hier is de Excel met het kwantitatieve deel (ritten â†’ busomlopen â†’ chauffeursdiensten + samenvatting + reservebussen):

K3_Kwantitatief_Busomlopen_en_Chauffeursdiensten.xlsx



Parameters
Trips
Omlopen
Voertuigen
Chauffeursdiensten
Samenvatting
Reservebussen
Leesmij

Tabbladen:

Trips (alle ritten uit Bijlage J)

Omlopen (toewijzing ritten aan bussen + volgorde)

Voertuigen (benodigde bussen, service-uren, span/idle)

Chauffeursdiensten (diensten met 60 min aanrijden + 60 min afrijden, opgesplitst op max. dienstlengte)

Samenvatting (per datum/busdienst/bustype)

Reservebussen (overgenomen uit het Voorblad)

Parameters (keertijd / aanrijdtijd / max dienstlengte)

Als je wil, kan ik â€˜m ook meteen aanpassen naar jullie gewenste aannames (bv. andere keertijd of max. dienstlengte).

Je zei:
docscasusbusdienstenbusomloop.zip
Zip-archief
Ik heb deze documenten gekregen, waarbij een dubbeldekker casus is uitgewerkt (een van de eerste sheets van bijlage J). Waarbij wordt beoordeeld hoeveel bussen er nodig zijn. De versie van bijlage J die is aangeduid met BG staat voor Bas Geenen, die heeft daar ook met kleurtjes proberen uit te werken hoeveel bussen er zijn. Die is gedaan op basis van het Transvision document (zo zou een busomloop er minimaal uit moeten gaan zien, dus het overzicht daaruit is de minimale output voor die busomloop). Er is ook een overzicht gemaakt in een van de documenten die in Ã©Ã©n slide laat zien hoe de verschillende dagen uit de tabladen van bijlage J met elkaar samenhangen. Snap jij die beiden uitwerkingen? Ik zou graag (net als jij net hebt gedaan) het busomloop model maken voor alle tabladen uit bijlage J die als output heeft minimaal wat Transvision laat zien. Ik zou uiteindelijk graag een python script maken die een vergelijkbaar excel bestand kan inladen en dan een excel output die bepaalt hoe een efficiente busomloop eruit ziet voor ieder tabblad. Kan je de logica uitwerken daarvoor? Dan kunnen we daarna toewerken naar een python code. 
ChatGPT zei:

Nagedacht gedurende 6m 23s
Ja â€” ik snap ze allebei, en ze passen logisch op elkaar:

â€œOverzicht businzet.xlsxâ€ is in feite een index: welke busdiensten (tabbladen uit Bijlage J) op welke dagen bestaan, en dus welke tabbladen je als losse â€œplanningsproblemenâ€ moet oplossen.

De BG-uitwerking (met kleurtjes) + â€œOmloop Poging 1 BG.xlsxâ€ doet precies dit voor Ã©Ã©n tabblad (de dubbeldekker-casus):

uit het tabblad haalt hij de ritten (heen + terug),

en hij â€œkleurtâ€ die ritten zÃ³ dat je ze kunt ketenen per bus (omloop) zonder overlap,

waarna hij de output neerzet in een overzicht dat lijkt op de Transvision-busomloop output (Van/Naar, Van/Tot, Duur, Hold/layover per bus).

Wat jij wilt (en wat heel goed kan) is dit proces algoritmisch maken voor alle tabbladen: input = een tabblad in Bijlage J-format, output = een omloop-overzicht â€œminimaal zoals Transvisionâ€.

Hieronder de logica, zo uitgewerkt dat we er daarna direct Python van kunnen maken.

Doel: â€œefficiÃ«nte busomloopâ€ per tabblad
Primair doel: minimaliseer het aantal bussen (per bustype) dat nodig is om alle ritten te rijden.
Secundair: minimaliseer â€œwacht/holdâ€ en (als je het wil) minimaliseer dode km (alleen als we reposition-tijden kennen).

Dit is klassiek vehicle scheduling / block building.

Stap 1 â€” Trips (ritten) genereren uit Ã©Ã©n tabblad
1A) Herken de twee secties
Elk tabblad bevat typisch:

Busbewegingen in heenrichting

Busbewegingen in terugrichting

Beide secties hebben:

Een rij met Busnummer-kolommen (dit zijn â€œvertrekmomentenâ€ / ritkolommen).

Een rij Type bus (DD / touringcar / taxi).

Een rij Aantal bussen (belangrijk: multipliciteit).

Daaronder een halte-tabel: Stationscode/Station/Halteplaats + tijden per Busnummer-kolom.

1B) Maak per Busnummer-kolom Ã©Ã©n (of meerdere) trip(s)
Voor elke Busnummer-kolom:

Startlocatie = eerste halte (Stationscode/Station).

Eindlocatie = laatste halte.

Vertrektijd = tijd op de eerste halte.

Aankomsttijd = tijd op de laatste halte.

Bustype = uit rij â€œType busâ€.

Multipliciteit = waarde uit rij â€œAantal bussenâ€.

Als multipliciteit = 2, dan maak je 2 identieke trips (zelfde tijden/route) met unieke IDs (bijv. 925010#1 en 925010#2).
Dat is precies hoe je â€œdubbel rijdenâ€ kwantitatief meeneemt.

1C) Tijd over middernacht
Als arrive_time < depart_time, dan betekent dit: aankomst is op volgende dag â‡’ +24 uur.

1D) Normaliseer naar Ã©Ã©n â€œTripsâ€-tabel
Per tabblad krijg je een tabel met rijen zoals:

trip_id	direction	bus_type	from	to	dep	arr	sheet_name	date
Stap 2 â€” Omlopen bouwen (toewijzing trips aan bussen)
Kernconstraint: ketenen mag alleen als het haalbaar is
Een bus kan trip B na trip A doen als:

A.to == B.from (zelfde eind- en startlocatie)

A.arr + min_turnaround <= B.dep

min_turnaround is een parameter (bijv. 5â€“10 min, en voor robuustheid liever iets ruimer).

Belangrijk: in jouw BG-output zie je de â€œHoldâ€ die hieruit volgt:
hold = B.dep - A.arr (of hold = B.dep - (A.arr + min_turnaround) als je turnaround apart wilt tonen)

2A) EfficiÃ«nt algoritme (greedy â€œbest-fitâ€)
Voor minimaliseren #bussen werkt dit in de praktijk heel goed:

Sorteer alle trips op dep (en eventueel arr als tie-break).

Houd een lijst bij van bestaande bussen, elk met:

last_location

available_time (= last_arrival + turnaround)

Voor elke trip in volgorde:

Vind alle bussen waarvoor last_location == trip.from Ã©n available_time <= trip.dep

Kies uit die bussen de beste:

Best-fit = bus met de laatste available_time (dus het dichtst tegen de start van de trip aan; minimaliseert idle)

Als geen bus past: start nieuwe bus.

Dit minimaliseert meestal het aantal bussen, en geeft meteen â€œnettereâ€ omlopen (minder gaten).

2B) Scheiden per bustype
Je draait dit algoritme per bustype (DD, touringcar, taxi), anders ga je onrealistisch mixen.

2C) (Optioneel) Reposition / deadhead
Als je later ook wilt toestaan dat een bus van locatie X naar Y rijdt om een volgende trip te halen, heb je een reposition-tijdmatrix nodig (Xâ†’Y).
Zonder die matrix zou ik het voorlopig uitzetten (alleen ketenen bij dezelfde locatie), omdat anders â€œefficiÃ«ntâ€ al snel â€œonrealistischâ€ wordt.

Stap 3 â€” Chauffeursdiensten afleiden (eis: 60 min aanrijden)
Zodra je per bus een omloop hebt (lijst trips):

dienst_start = first_trip.dep - 60 min

dienst_einde = last_trip.arr + 60 min

Extraâ€™s (optioneel, maar handig):

Max dienstlengte (bijv. 10â€“12 uur): zo ja â‡’ splits een omloop in 2 diensten (zelfde bus, andere chauffeur).

Pauzes: regels kun je later toevoegen, maar voor de tender is vaak â€œaantoonbaar proces + plausibelâ€ voldoende.

Stap 4 â€” Output maken â€œminimaal zoals Transvisionâ€
Transvision laat in essentie zien (op Ã©Ã©n pagina) per dienst/bus:

datum

dienstnummer

heen/terug ritvolgorde met tijden

totale diensttijd

(en location/halte-info)

De minimale Excel-output die goed aansluit op BG/Transvision is:

Tab: Omlopen_{sheet}
Per bus een blok met kolommen:

Van, Naar, Van (tijd), Tot (tijd), Duur, Hold

â€¦exact zoals in â€œOmloop Poging 1 BG.xlsxâ€.

Tab: Samenvatting
Per tabblad:

bussen per bustype
totale voertuiguren (som van tripduur + holds / of alleen â€œin serviceâ€ afhankelijk van definitie)

totale chauffeursuren (met +60/+60)

Tab: Niet toegewezen (fallback)
Als ooit een trip niet gepland kan worden (zou zelden moeten bij dezelfde-locatie ketening), zet je hem hier neer.

Belangrijk detail: waarom de dubbeldekker-casus â€œtrickyâ€ is
In de dubbeldekker-tabellen zit vaak â€œAantal bussen = 2â€ bij spitspatronen. Dat betekent niet dat Ã©Ã©n bus twee ritten doet, maar dat er parallel gereden wordt. Door die trips te dupliceren, dwing je het model om ook echt 2 bussen tegelijk beschikbaar te hebben.

Dat is precies het â€œhoeveel bussen heb je nodig?â€ deel waar NS op beoordeelt.

Pseudocode (zodat we hierna direct Python kunnen schrijven)
for each sheet in workbook (exclude 'Voorblad'):
    trips = parse_sheet_to_trips(sheet)          # heen + terug, incl multipliciteit
    trips_by_type = group trips by bus_type

    all_blocks = []
    for bus_type, trips_t in trips_by_type:
        blocks = greedy_block_building(trips_t, min_turnaround)
        all_blocks += blocks

    duties = build_driver_duties(all_blocks, deadhead=60)

    write_output_sheet(sheet_name, all_blocks)   # Van/Naar/Van/Tot/Duur/Hold
    append_summary(sheet_name, blocks, duties)
Volgende stap richting Python (zonder meteen code te dumpen)
Als jij dit logisch vindt, dan is de beste vervolgstap:

Definitief output-template kiezen (exacte kolomnamen / tabs zoals jij wil, bijv. 1 tab per input-tabblad of alles in Ã©Ã©n tabel).

Parameters vastleggen:

turnaround (bijv. 8 min)

aanrijdtijd (vast 60 min)

wel/niet reposition

Dan schrijven we het Python-script met:

openpyxl voor het robuust lezen van die â€œBusbewegingenâ€-secties

pandas voor trip-tabel + planning + export

Als je wil: noem 1 tabblad dat je â€œrepresentatiefâ€ vindt (bv. ST Db-Rhn of een stopbus met meer haltes). Dan check ik of de parser-regels hierboven ook daarop passen (meestal wel), en dan gaan we door naar de code.


Bronnen




Geen bestand gekozenGeen bestand gekozen
ChatGPT kan fouten maken. OpenAI gebruikt geen werkruimtegegevens van Rotrip om modellen te trainen.
